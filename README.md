# Claude Deck

**Website**: [claudedeck.org](https://claudedeck.org)

A self-hosted web application for visualizing and managing Claude Code configuration. Provides a unified interface for managing MCP servers, plugins, slash commands, hooks, agents, permissions, usage tracking, and other Claude Code extensions.

## Features

- **Dashboard**: Overview of all Claude Code configurations with quick stats
- **Config Viewer**: Browse and inspect all configuration files (merged and individual)
- **MCP Servers**: Add, edit, remove, and test MCP server connections
- **Slash Commands**: Browse, create, and edit custom commands (user and project scope)
- **Plugins**: Browse installed plugins with detail views
- **Hooks**: Configure automation hooks by event type
- **Permissions**: Visual allow/deny rule builder
- **Agents & Skills**: Manage custom agents and view available skills
- **Output Styles**: Configure response output formats
- **Status Line**: Customize Claude Code status line display
- **Session Transcripts**: View conversation history with full message details
- **Usage Tracking**: Monitor token usage, costs, and billing blocks with charts
- **Backup & Restore**: Create and manage configuration backups
- **Projects**: Discover and manage project directories

## Screenshots

*Coming soon*

## Tech Stack

| Layer | Technology |
|-------|------------|
| Backend | Python 3.11+ with FastAPI |
| Frontend | React 18 + TypeScript + Vite |
| UI Components | shadcn/ui + Tailwind CSS |
| Charts | Recharts (via shadcn/ui) |
| Database | SQLite (via SQLAlchemy) |
| API Docs | OpenAPI (auto-generated by FastAPI) |

## Prerequisites

- Python 3.11+
- Node.js 18+
- npm

## Installation

1. Clone the repository:
```bash
git clone <repository-url>
cd claude-deck
```

2. Run the install script:
```bash
./scripts/install.sh
```

This will:
- Create a Python virtual environment
- Install backend dependencies
- Install frontend dependencies
- Create required directories

## Development

Start the development servers:

```bash
./scripts/dev.sh
```

This starts:
- Backend at http://localhost:8000
- Frontend at http://localhost:5173
- API docs at http://localhost:8000/docs

### Manual Start

If you prefer to start servers manually:

**Backend:**
```bash
cd backend
source venv/bin/activate
uvicorn app.main:app --reload --port 8000
```

**Frontend:**
```bash
cd frontend
npm run dev
```

## Production Build

Build the frontend for production:

```bash
./scripts/build.sh
```

The built files will be in `frontend/dist`.

## Configuration Files

The application reads/writes these Claude Code configuration files:

| File/Directory | Scope | Description |
|---------------|-------|-------------|
| `~/.claude.json` | User | OAuth, caches, MCP servers |
| `~/.claude/settings.json` | User | User settings |
| `~/.claude/commands/` | User | User slash commands |
| `~/.claude/agents/` | User | User agents |
| `~/.claude/projects/` | User | Session transcripts & usage data |
| `.claude/settings.json` | Project | Project settings |
| `.claude/commands/` | Project | Project slash commands |
| `.mcp.json` | Project | Project MCP servers |
| `CLAUDE.md` | Project | Project instructions |

## API Endpoints

Visit http://localhost:8000/docs for interactive API documentation.

### Key Endpoints

| Category | Endpoints |
|----------|-----------|
| Health | `GET /api/v1/health` |
| Config | `GET /api/v1/config/files`, `/config/merged` |
| MCP Servers | `GET/POST/PUT/DELETE /api/v1/mcp/servers` |
| Commands | `GET/POST/PUT/DELETE /api/v1/commands` |
| Plugins | `GET /api/v1/plugins` |
| Hooks | `GET/POST/PUT/DELETE /api/v1/hooks` |
| Permissions | `GET/POST/PUT/DELETE /api/v1/permissions` |
| Agents | `GET/POST/PUT/DELETE /api/v1/agents` |
| Skills | `GET /api/v1/agents/skills` |
| Output Styles | `GET/POST/PUT/DELETE /api/v1/output-styles` |
| Status Line | `GET/PUT /api/v1/statusline` |
| Sessions | `GET /api/v1/sessions`, `/sessions/{project}/{id}` |
| Usage | `GET /api/v1/usage/summary`, `/daily`, `/sessions`, `/monthly`, `/blocks` |
| Backup | `GET/POST/DELETE /api/v1/backup` |

## Project Structure

```
claude-deck/
├── backend/
│   ├── app/
│   │   ├── api/v1/          # API endpoints
│   │   ├── models/          # Database & Pydantic models
│   │   ├── services/        # Business logic
│   │   │   ├── config_service.py
│   │   │   ├── mcp_service.py
│   │   │   ├── session_service.py
│   │   │   ├── usage_service.py
│   │   │   ├── pricing_service.py
│   │   │   └── ...
│   │   └── utils/           # Utility functions
│   ├── tests/               # pytest tests
│   ├── requirements.txt
│   └── pyproject.toml
├── frontend/
│   ├── src/
│   │   ├── components/      # Reusable UI components
│   │   │   ├── ui/          # shadcn/ui components
│   │   │   ├── layout/      # Layout components
│   │   │   └── shared/      # Shared components
│   │   ├── features/        # Feature-specific components
│   │   │   ├── dashboard/
│   │   │   ├── mcp/
│   │   │   ├── commands/
│   │   │   ├── plugins/
│   │   │   ├── hooks/
│   │   │   ├── permissions/
│   │   │   ├── agents/
│   │   │   ├── skills/
│   │   │   ├── sessions/
│   │   │   ├── usage/
│   │   │   └── ...
│   │   ├── hooks/           # React hooks
│   │   ├── lib/             # Utilities and API client
│   │   ├── types/           # TypeScript types
│   │   └── contexts/        # React contexts
│   ├── package.json
│   └── vite.config.ts
├── scripts/
│   ├── dev.sh               # Development startup
│   ├── install.sh           # Initial setup
│   └── build.sh             # Production build
└── README.md
```

## Usage Tracking

The usage tracking feature parses JSONL files from `~/.claude/projects/` to provide:

- **Cost tracking**: Per-model pricing with tiered rates (200k+ tokens)
- **Daily/Monthly views**: Aggregate usage over time
- **Session breakdown**: Usage per conversation session
- **Billing blocks**: 5-hour billing period tracking with active block detection
- **Burn rate**: Real-time cost projections for active sessions

## License

MIT License
